<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Giuseppe Della Penna"><link rel="shortcut icon" href=https://gdellapenna.github.io/img/favicon.ico type=image/x-icon><title>Giuseppe Della Penna :: The UPMurphi Planner
&#9655; usage
</title><link href=https://gdellapenna.github.io/css/bootstrap.min.css rel=stylesheet><link rel=stylesheet href=https://gdellapenna.github.io/css/bootstrap-icons.min.css><link rel=stylesheet href=/css/site.min.css><script src=https://gdellapenna.github.io/script/jquery.min.js></script></head><body style=position:relative data-bs-spy=scroll data-bs-target=#sidenav><div><nav class="text-light navbar navbar-light navbar-expand navbar-dark justify-content-center" style=background-color:#025078><div class="d-none d-lg-flex flex-fill"><ul class="navbar-nav ms-auto"><li class=nav-item><a class='link-light nav-link' href=https://gdellapenna.github.io/><span class='bi bi-house' title></span>
Home</a></li><li class='nav-item dropdown'><a class="link-light nav-link dropdown-toggle" role=button href=# data-bs-toggle=dropdown aria-expanded=false><span class='bi bi-info-circle' title></span>About</a><ul class="dropdown-menu dropdown-menu-end"><li><a class=dropdown-item href=https://gdellapenna.github.io/info/curriculum/><span class='bi bi-person-lines-fill' title></span>
Curriculum</a></li><li><a class=dropdown-item href=https://gdellapenna.github.io/info/contact/><span class='bi bi-person-vcard' title></span>
Contact info</a></li></ul></li><li class='nav-item dropdown'><a class="link-light nav-link dropdown-toggle" role=button href=# data-bs-toggle=dropdown aria-expanded=false><span class='bi bi-bank' title></span>Research</a><ul class="dropdown-menu dropdown-menu-end"><li><a class=dropdown-item href=https://gdellapenna.github.io/research/bibliography/><span class='bi bi-journal-text' title></span>
Publications</a></li><li><a class=dropdown-item href=https://gdellapenna.github.io/research/topics/><span class='bi bi-lightbulb' title></span>
Topics</a></li><li><a class=dropdown-item href=https://gdellapenna.github.io/research/upmurphi/>UPMurphi</a></li></ul></li><li class='nav-item dropdown'><a class="link-light nav-link dropdown-toggle" role=button href=# data-bs-toggle=dropdown aria-expanded=false><span class='bi bi-mortarboard' title></span>Teaching</a><ul class="dropdown-menu dropdown-menu-end"><li><a class=dropdown-item href=https://laboratoriobasididati-univaq.github.io/><span class='bi bi-easel' title></span>
Laboratorio Basi di Dati</a></li><li><a class=dropdown-item href=https://sviluppowebavanzato-univaq.github.io/><span class='bi bi-easel' title></span>
Sviluppo Web Avanzato</a></li><li><a class=dropdown-item href=https://webengineering-univaq.github.io/><span class='bi bi-easel' title></span>
Web Engineering</a></li><li><a class=dropdown-item href=https://gdellapenna.github.io/teaching/oldcourses/><span class='bi bi-easel-fill' title></span>
Old courses</a></li><li><a class=dropdown-item href=https://gdellapenna.github.io/teaching/theses/><span class='bi bi-book' title></span>
Theses</a></li></ul></li></ul></div><div class="d-flex align-items-center justify-content-stretch d-lg-none d-block" style=background-color:#025078><form class="d-flex align-items-center justify-content-stretch accessible-menu"><div class="text-light text-nowrap me-1">Page</div><select class=form-select><option value=https://gdellapenna.github.io/>Home</option><option disabled value>About</option><option value=https://gdellapenna.github.io/info/curriculum/>>Curriculum</option><option value=https://gdellapenna.github.io/info/contact/>>Contact info</option><option disabled value>Research</option><option value=https://gdellapenna.github.io/research/bibliography/>>Publications</option><option value=https://gdellapenna.github.io/research/topics/>>Topics</option><option value=https://gdellapenna.github.io/research/upmurphi/>>UPMurphi</option><option disabled value>Teaching</option><option value=https://laboratoriobasididati-univaq.github.io/>>Laboratorio Basi di Dati</option><option value=https://sviluppowebavanzato-univaq.github.io/>>Sviluppo Web Avanzato</option><option value=https://webengineering-univaq.github.io/>>Web Engineering</option><option value=https://gdellapenna.github.io/teaching/oldcourses/>>Old courses</option><option value=https://gdellapenna.github.io/teaching/theses/>>Theses</option></select></form></div></nav></div><header id=page-header><div id=page-header-maintitle>Giuseppe Della Penna<h1 id=page-header-pagetitle>The UPMurphi Planner
&#9655; usage</h1></div></header><main id=center class=container-fluid><div class="row my-2 text-justify"><div class="col-12 text-justify" id=body><h2 id=creating-planners>Creating planners</h2><p>UPMurphi generates planners as standalone executables. The input model can be either</p><ul><li>a pair of (domain, problem) PDDL files</li><li>a precompiled model in the Murphi format.</li></ul><p>In the former case, UPMurphi will automatically call the PDDL-to-Murphi compiler to obtain the Murphi model corresponding to the given PDDL domain and problem, and then compile it to create the planner. This is the default behaviour of UPMurphi. Advanced users may directly write the Murphi model or make modifications to a PDDL-derived model. To this aim, please refer to the Murphi_User_Manual.txt and Murphi_User_Manual.txt files in the &ldquo;doc&rdquo; folder.</p><p>Note that some models have an associated library (.c file and possibly the corresponding header file .h) which define functions to be called by the model during its execution.</p><p>To compile a PDDL domain/problem to an UPMurphi planner, invoke the UPMurphi compiler (upmc) as follows:</p><p><code>upmc &lt;domain.pddl> &lt;problem.pddl></code></p><p>This will call several tools (including the g++ compiler) and generate the following files:</p><ul><li>domain.m, the compiled planner model</li><li>domain.h / domain.c, the extenral funzions for the model (see below)</li><li>domain.cpp, the C++ planner source</li><li>problem_planner(.exe), the planner</li></ul><p>You can pass several options to upmc. Type <code>upmc --help</code> for a full list.</p><ul><li>the compiler will skip the compilation steps whose input appears not modified since last execution. To force a full recompilation, use the <code>--force</code> switch.</li><li>if your model uses variable rule durations and weights (i.e., the duration and/or weight of a rule depends also from the state the rule is applied on), you MUST add the <code>--varweight</code> and/or <code>--varduration</code> switches. to notify the planner of this. Otherwise, the planning results will be incorrect. Note that each of these switches increase the planner memory and disk requirements, so use them only if you need them!</li><li>to create a debug-mode planner (see below) use the <code>--debug</code> switch.</li><li>to override the default discretization used to compile the PDDL domain, you can specify the <code>--custom X Y</code> switch, or the <code>--prompt</code> switch to enter it interactively during the compilation process.</li></ul><h2 id=executing-planners>Executing planners</h2><p>Once the executable planner has been generated, you can run it to start the planning process. By default, the planner will search for a feasible plan and write it to the file &lt;problem_name>_plan.pddl.</p><p>If you compiled a <strong>debug mode planner</strong>, then it will stop every time a model rule can be executed (i.e, an action can be taken, an event can occur, the clock can tick, etc.) and ask the user if it should be actually fired, displaying the rule name and the corresponding PDDL action/event name, if available. You can then allow its execution writing <code>y</code> (<em>yes</em>, the default), or deny the execution with <code>n</code> (<em>no</em>, in this case the planning will continue as the rule was never encountered). You can also decide to <em>always</em> fire a particular rule (answering <code>a</code>), or <em>never</em> fire it again (answering <code>e</code>).</p><p>The memory given to the planner is 1Gb. Many options areavailable to change the planner&rsquo;s default behaviour:</p><h3 id=general>General</h3><ul><li><code>-noclear</code> <em>do not delete working disk files.</em></li></ul><p>If <code>-noclear</code> is NOT specified, the planner will remove all its temporary files from disk after its execution. You can use -noclear to save the planner files for further processing: these include a full (binary) dump of the plant states, the complete set of transitions, the inverted plant graph, the optimal actions chosen in each state, etc.</p><ul><li><code>-m&lt;n></code> <em>give the planner n megabytes of memory default 1000).</em></li><li><code>-val</code> <em>validate plans</em></li></ul><p>To use this option, VAL must be installed on your system and its path configured in the UPMurphi makefile.</p><h3 id=algorithm>Algorithm</h3><ul><li><code>-search:o</code> <em>create an optimal plan for each startstate.</em></li><li><code>-search:u</code> <em>create an universal plan.</em></li><li><code>-search:uo</code> <em>create an universal optimal plan.</em></li><li><code>-search:f</code> <em>create a feasible plan for each startstate (default).</em></li></ul><p>The -search:* options set the planning algorithm to use.</p><ul><li><code>-cdl</code> <em>check for deadlock.</em></li></ul><p>Deadlock detection is DISABLED by default. You can activate it with -cdl.</p><ul><li><code>-l&lt;n></code> <em>maximum bfs level (default: unlimited).</em></li></ul><p>The number of BFS levels to explore can be specified through the -l option. If this option is set, the planner will work only on the states found on these levels, otherwise it will try to explore the entire domain before starting the optimisation and planning phases.</p><ul><li><code>-lt&lt;n></code> <em>maximum plan length (default: unlimited).</em></li></ul><p>You can use this option to limit the plans to a maximum number of clock ticks. Plans longer than this limit will be ignored.</p><h3 id=output>Output</h3><ul><li><code>-output file</code> <em>write output in file (default: &lt;problem_name>_plan.pddl).</em></li><li><code>-print</code> <em>also print output to console.</em></li></ul><p>By default, final output is written to an output file &lt;problem_name>_plan.pddl. If you want to specify a different filename, use the -output option. Using the option -print will cause such file to be copied to stdout, too.</p><ul><li><code>-format:pddl</code> <em>output plans in pddl format (default).</em></li><li><code>-format:pddlv</code> <em>output plans in pddl format with verbose comments.</em></li><li><code>-format:pddlvv</code> <em>output plans in pddl format with very verbose comments.</em></li><li><code>-format:text</code> <em>output plans/actions in text format.</em></li><li><code>-format:verbose</code> <em>output plans/actions in verbose text format.</em></li><li><code>-format:raw</code> <em>output actions in binary format.</em></li><li><code>-format:csv</code> <em>output actions in csv format.</em></li></ul><p>Output formats, specified through the <code>-format:\*</code> options, are:</p><ul><li><strong>pddl</strong>: standard PDDL plan format. This is the default</li><li><strong>pddlv</strong>: PDDL plan format with comments that show the execution of &ldquo;invisible actions&rdquo; such as events, durative action terminations, clock ticks, etc.</li><li><strong>pddlvv</strong>: as pddlv but, after each step, prints also a comment with the current domain variables value.</li><li><strong>text</strong>: textual format useful for diagnostic purposes.</li><li><strong>verbose</strong>: as text, but prints the system state after each step.</li><li><strong>raw</strong>: prints the control actions in binary format. Useful to generate controllers instead of universal plans.</li><li><strong>csv</strong>: prints the control actions in csv format. Each row contains the description of a state (i.e., the list of its variables) and the name of the rule to apply in such state. Values are separated by a colon. Warning: only variables marked with a pddlname are included is the state output!</li></ul></div></div></main><footer id=footer class="d-flex w-100 justify-content-between align-items-start"><div>(c) <a href=https://gdellapenna.github.io/info/contact>Giuseppe Della Penna</a> | <a href=https://gdellapenna.github.io/info/credits>credits</a></div><div>Valid <a href=http://validator.w3.org title="validate markup">HTML5</a> and <a href=http://jigsaw.w3.org/css-validator title="validate CSS">CSS3</a></div></footer><a id=totop href=#top><i class="bi bi-chevron-double-up"></i></a>
<script src=https://gdellapenna.github.io/script/bootstrap.bundle.js></script><script src=https://gdellapenna.github.io/script/personal.js></script></body></html>